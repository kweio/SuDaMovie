{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  props: [\"movieData\", \"pay\", \"bgc\", \"isShowIcon\", \"bgcTitle\", \"positionBgc\", \"payColor\"],\n  data() {\n    return {\n      selectedMovieList: [] // 选中的电影列表\n    };\n  },\n\n  computed: {\n    // 选中的电影数量\n    selectedMovieNum() {\n      return this.selectedMovieList.length;\n    }\n  },\n  watch: {\n    // 这里是监听isShowIcon，在每次进入编辑状态时，重置数据，清空选中的电影列表\n    isShowIcon(val, oldVal) {\n      if (!oldVal) {\n        this.selectedMovieList = [];\n      }\n    }\n  },\n  methods: {\n    // 点击每个电影选项勾图标触发\n    selectOneClick(movieData) {\n      const flag = this.selectedMovieList.findIndex(item => {\n        return item._id == movieData._id;\n      });\n      if (flag == -1) {\n        this.$set(movieData, \"isSelected\", true);\n        this.selectedMovieList.push(movieData);\n      } else {\n        this.$set(movieData, \"isSelected\", false);\n        this.selectedMovieList.splice(flag, 1);\n      }\n    },\n    // 点击全选按钮触发\n    selectAllClick() {\n      if (this.movieData.length == this.selectedMovieNum) {\n        // 如果已经是全选状态\n        this.movieData.forEach(item => {\n          this.$set(item, \"isSelected\", false);\n        });\n        this.selectedMovieList = [];\n      } else {\n        // 非全选状态\n        this.movieData.forEach(item => {\n          this.$set(item, \"isSelected\", true);\n        });\n        this.selectedMovieList = JSON.parse(JSON.stringify(this.movieData));\n      }\n    },\n    // 删除按钮点击触发\n    async delteClick() {\n      // 选中的电影为0时，删除按钮点击无效\n      if (!this.selectedMovieNum) return;\n      // 选中的电影为>0时,将选中的电影数据交给父组件处理\n      this.$emit(\"deleteClick\", this.selectedMovieList);\n    }\n  }\n};","map":{"version":3,"mappings":";AA4EA;EACAA,QACA,aACA,OACA,OACA,cACA,YACA,eACA,WACA;EACAC;IACA;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;QACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;UACA;QACA;QACA;MACA;QACA;QACA;UACA;QACA;QACA;MACA;IACA;IACA;IACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA","names":["props","data","selectedMovieList","computed","selectedMovieNum","watch","isShowIcon","methods","selectOneClick","selectAllClick"],"sourceRoot":"src/components","sources":["MovieList.vue"],"sourcesContent":["<template>\n  <div class=\"movie-list\" :style=\"`backgroundColor: ${bgc}`\">\n    <!-- 单个电影 -->\n    <router-link\n      tag=\"div\"\n      :to=\"`/movieDetail/${item._id}`\"\n      class=\"movie-item\"\n      v-for=\"item in movieData\"\n      :key=\"item._id\"\n    >\n      <!-- 选中图表部分 -->\n      <div\n        class=\"selectIcon\"\n        v-if=\"isShowIcon\"\n        @click.stop=\"selectOneClick(item)\"\n      >\n        <span :class=\"[!item.isSelected ? '' : 'selectedActive']\">\n          <van-icon name=\"success\" />\n        </span>\n      </div>\n      <!-- 图片部分 -->\n      <div class=\"image\">\n        <img :src=\"item.image\" :alt=\"item.name\" />\n      </div>\n      <!-- 详情部分 -->\n      <div class=\"detail\">\n        <slot name=\"center\" :item=\"item\"></slot>\n      </div>\n      <!-- 购买部分 -->\n      <div class=\"pay\" v-if=\"pay\">\n        <span :style=\"{ backgroundColor: payColor ? payColor : 'red' }\">{{\n          pay\n        }}</span>\n      </div>\n    </router-link>\n    <!-- 底部全选栏部分 -->\n    <div class=\"footer\" v-if=\"isShowIcon\">\n      <div class=\"footer-left\">\n        <div class=\"footer-left-selectIcon\" @click=\"selectAllClick\">\n          <span\n            :class=\"[\n              movieData.length == selectedMovieNum ? 'selectedActive' : '',\n            ]\"\n            ><van-icon name=\"success\"\n          /></span>\n        </div>\n        <div class=\"selectedNum\">\n          <span\n            >已选择<span style=\"color: red\">{{ selectedMovieNum }}</span\n            >条</span\n          >\n        </div>\n      </div>\n      <div class=\"footer-right\" @click=\"delteClick\">\n        <span :class=\"[!selectedMovieNum ? '' : 'selectedActive']\">删除</span>\n      </div>\n    </div>\n    <!-- 底部全选栏占位盒子 -->\n    <div class=\"position-box\" v-if=\"isShowIcon\"></div>\n    <!-- 电影数据为空时的占位背景 -->\n    <div\n      class=\"bgc-show\"\n      v-if=\"!movieData.length\"\n      :style=\"`background-color: ${positionBgc}`\"\n    >\n      <div class=\"bgc-show-center\">\n        <div class=\"logo\"><i class=\"iconfont icon-nothing\"></i></div>\n        <div class=\"content\">\n          <span>{{ bgcTitle }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\n    \"movieData\",\n    \"pay\",\n    \"bgc\",\n    \"isShowIcon\",\n    \"bgcTitle\",\n    \"positionBgc\",\n    \"payColor\",\n  ],\n  data() {\n    return {\n      selectedMovieList: [], // 选中的电影列表\n    };\n  },\n  computed: {\n    // 选中的电影数量\n    selectedMovieNum() {\n      return this.selectedMovieList.length;\n    },\n  },\n  watch: {\n    // 这里是监听isShowIcon，在每次进入编辑状态时，重置数据，清空选中的电影列表\n    isShowIcon(val, oldVal) {\n      if (!oldVal) {\n        this.selectedMovieList = [];\n      }\n    },\n  },\n  methods: {\n    // 点击每个电影选项勾图标触发\n    selectOneClick(movieData) {\n      const flag = this.selectedMovieList.findIndex((item) => {\n        return item._id == movieData._id;\n      });\n      if (flag == -1) {\n        this.$set(movieData, \"isSelected\", true);\n        this.selectedMovieList.push(movieData);\n      } else {\n        this.$set(movieData, \"isSelected\", false);\n        this.selectedMovieList.splice(flag, 1);\n      }\n    },\n    // 点击全选按钮触发\n    selectAllClick() {\n      if (this.movieData.length == this.selectedMovieNum) {\n        // 如果已经是全选状态\n        this.movieData.forEach((item) => {\n          this.$set(item, \"isSelected\", false);\n        });\n        this.selectedMovieList = [];\n      } else {\n        // 非全选状态\n        this.movieData.forEach((item) => {\n          this.$set(item, \"isSelected\", true);\n        });\n        this.selectedMovieList = JSON.parse(JSON.stringify(this.movieData));\n      }\n    },\n    // 删除按钮点击触发\n    async delteClick() {\n      // 选中的电影为0时，删除按钮点击无效\n      if (!this.selectedMovieNum) return;\n      // 选中的电影为>0时,将选中的电影数据交给父组件处理\n      this.$emit(\"deleteClick\", this.selectedMovieList);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n// 电影列表部分\n.movie-list {\n  padding: 0.3846rem 1.5385rem;\n  border-radius: 1.5385rem;\n  // 单个电影样式\n  .movie-item {\n    margin: 1.5385rem 0;\n    padding-bottom: 0.7692rem;\n    display: flex;\n    align-items: center;\n    height: 7.6923rem;\n    text-align: left;\n    border-bottom: 0.0769rem solid #ccc;\n    // 选中图标部分\n    .selectIcon {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n      width: 10%;\n      span {\n        color: #fff;\n        font-size: 1.5385rem;\n        border-radius: 100%;\n        border: 1px solid rgb(126, 126, 126);\n      }\n    }\n    // 图片部分\n    .image {\n      width: 25%;\n      height: 100%;\n      img {\n        height: 100%;\n        border-radius: 10%;\n      }\n    }\n    // 详情部分\n    .detail {\n      width: 60%;\n      height: 100%;\n      display: flex;\n      font-size: 1.1538rem;\n      flex-direction: column;\n      justify-content: space-around;\n      // 标题\n      .title {\n        width: 100%;\n      }\n      // 内容\n      .content {\n        color: rgb(126, 126, 126);\n        p {\n          padding: 0.0769rem 0;\n        }\n      }\n    }\n    // 购买部分\n    .pay {\n      text-align: right;\n      flex: 1;\n      color: #fff;\n      span {\n        background-color: red;\n        padding: 0.3846rem 0.7692rem;\n        border-radius: 0.3846rem;\n      }\n    }\n  }\n  // 底部全选栏部分\n  .footer {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    padding: 0 1.5385rem;\n    z-index: 100;\n    height: 3.8462rem;\n    background-color: #fff;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .footer-left {\n      display: flex;\n      align-items: center;\n      // 全选图标样式\n      .footer-left-selectIcon {\n        span {\n          color: #fff;\n          font-size: 1.5385rem;\n          border-radius: 100%;\n          border: 1px solid rgb(126, 126, 126);\n        }\n      }\n      // 被选中数量提示样式\n      .selectedNum {\n        margin: 0 0.7692rem;\n      }\n    }\n    .footer-right {\n      span {\n        color: #fff;\n        background-color: #f7afaf;\n        padding: 0.3846rem 0.7692rem;\n        border-radius: 1.1538rem;\n      }\n    }\n  }\n  // 占位盒子\n  .position-box {\n    height: 3.8462rem;\n  }\n}\n// 打勾图标选中高亮和删除按钮高亮\n.selectedActive {\n  color: #fff !important;\n  background-color: red !important;\n  border: none !important;\n}\n// 占位背景\n.bgc-show {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  .bgc-show-center {\n    color: rgb(159, 159, 159);\n    .logo {\n      i {\n        font-size: 11.5385rem;\n      }\n    }\n    .content {\n      margin-top: 2.3077rem;\n      font-size: 1.5385rem;\n    }\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}