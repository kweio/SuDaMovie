{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport TopBar from \"@/components/TopBar.vue\";\nexport default {\n  name: \"MineOrder\",\n  components: {\n    TopBar\n  },\n  data() {\n    return {\n      orderList: []\n    };\n  },\n  methods: {\n    // 顶部返回按钮点击触发\n    backIconClick() {\n      this.$router.back();\n    },\n    // 获取本订单列表\n    async getOrderList() {\n      const userId = localStorage.getItem(\"userId\");\n      const {\n        data: {\n          orderList\n        }\n      } = await this.$http.get(`/getUserOrderData/${userId}`);\n      this.orderList = JSON.parse(JSON.stringify(orderList));\n      console.log(this.orderList);\n    },\n    // // 点击影院名触发\n    // goToCinema(cinemaId) {\n    //   this.$router.push({\n    //     path: \"/cinemaDetail\",\n    //     query: {\n    //       cinemaId: cinemaId,\n    //     },\n    //   });\n    // },\n    // 点击电影图片触发\n    goToMovieDetail(movieId) {\n      this.$router.push(`/movieDetail/${movieId}`);\n    },\n    // 点击评价影片触发\n    commentMovie(movieId) {\n      this.$router.push(`/movieComment/${movieId}`);\n    },\n    // 点击删除订单触发\n    async deleteOrder(orderId) {\n      const result = await this.$dialog.confirm({\n        message: \"是否确定删除订单？\",\n        confirmButtonColor: \"#1989fa\"\n      }).catch(err => err);\n      if (result == \"cancel\") return;\n      const {\n        data\n      } = await this.$http.delete(`/deleteOrder/${orderId}`);\n      if (data.status == \"Ok\") {\n        this.$toast({\n          type: \"success\",\n          message: \"删除成功~\"\n        });\n        this.getOrderList();\n      }\n    }\n  },\n  created() {\n    this.getOrderList();\n  }\n};","map":{"version":3,"mappings":";AAgFA;AACA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;IACA;IACA;IACA;MACA;MACA;QACAH;UAAAC;QAAA;MACA;MACA;MACAG;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACA;MACA,kCACAC;QACAC;QACAC;MACA,GACAC;MACA;MACA;QAAAV;MAAA;MACA;QACA;UACAW;UACAH;QACA;QACA;MACA;IACA;EACA;EACAI;IACA;EACA;AACA","names":["name","components","TopBar","data","orderList","methods","backIconClick","console","goToMovieDetail","commentMovie","confirm","message","confirmButtonColor","catch","type","created"],"sourceRoot":"src/views","sources":["MineOrder.vue"],"sourcesContent":["<template>\n  <div class=\"mine-order\">\n    <!-- 顶部topBar部分 -->\n    <TopBar bgc=\"#fff\" centerContent=\"我的订单\" @backIconClick=\"backIconClick\">\n    </TopBar>\n    <!-- 订单列表部分 -->\n    <div class=\"orderList\">\n      <div class=\"orderItem\" v-for=\"item in orderList\" :key=\"item._id\">\n        <div class=\"orderItem-top\">\n          <div\n            class=\"cinema-name ellipsis\"\n            @click.stop.prevent=\"goToCinema(item.cinemaId)\"\n          >\n            <span>{{ item.name }}</span>\n            <span><van-icon name=\"arrow\" /></span>\n          </div>\n          <div class=\"finish-status\">\n            <span>已完成</span>\n          </div>\n        </div>\n        <div class=\"orderItem-center\">\n          <div\n            class=\"movie-image\"\n            @click.stop.prevent=\"goToMovieDetail(item.movieId._id)\"\n          >\n            <img :src=\"item.movieId.image\" />\n          </div>\n          <div class=\"movie-detail\">\n            <div class=\"movie-name\">\n              <p class=\"ellipsis\">{{ item.movieId.name }}</p>\n              <span>{{ item.ticketNum }}张</span>\n            </div>\n            <div class=\"order-detail\">\n              <div class=\"ticket-code\">\n                <span>取票码：{{ item.ticketCode }}</span>\n              </div>\n              <div class=\"order-date\">\n                <span\n                  >{{ item.orderDate.slice(0, 4) }}年{{\n                    item.orderDate.slice(5, 7)\n                  }}月{{ item.orderDate.slice(8, 10) }}日</span\n                >\n                <span>{{ item.orderTime }}</span>\n              </div>\n              <div class=\"postion ellipsis\">\n                <span>{{ item.hallId.name }}</span>\n                <span v-for=\"(item1, index1) in item.seatInfo\" :key=\"index1\"\n                  >{{ item1[0] + 1 }}排{{ item1[1] + 1 }}座</span\n                >\n              </div>\n            </div>\n          </div>\n          <div\n            class=\"comment-movie\"\n            @click.stop.prevent=\"commentMovie(item.movieId._id)\"\n          >\n            <span>评价影片</span>\n          </div>\n        </div>\n        <div class=\"orderItem-bottom\">\n          <div class=\"total-price\">\n            <span>总价：{{ item.totalPrice.toFixed(2) }}元</span>\n          </div>\n          <div class=\"delete-order\" @click.stop.prevent=\"deleteOrder(item._id)\">\n            <span>删除订单</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 订单列表为空时的占位背景 -->\n    <div v-if=\"!orderList.length\" class=\"bgc-show\">\n      <div class=\"bgc-show-center\">\n        <div class=\"logo\"><i class=\"iconfont icon-nothing\"></i></div>\n        <div class=\"content\"><span>暂无订单</span></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TopBar from \"@/components/TopBar.vue\";\nexport default {\n  name: \"MineOrder\",\n  components: {\n    TopBar,\n  },\n  data() {\n    return {\n      orderList: [],\n    };\n  },\n  methods: {\n    // 顶部返回按钮点击触发\n    backIconClick() {\n      this.$router.back();\n    },\n    // 获取本订单列表\n    async getOrderList() {\n      const userId = localStorage.getItem(\"userId\");\n      const {\n        data: { orderList },\n      } = await this.$http.get(`/getUserOrderData/${userId}`);\n      this.orderList = JSON.parse(JSON.stringify(orderList));\n      console.log(this.orderList);\n    },\n    // // 点击影院名触发\n    // goToCinema(cinemaId) {\n    //   this.$router.push({\n    //     path: \"/cinemaDetail\",\n    //     query: {\n    //       cinemaId: cinemaId,\n    //     },\n    //   });\n    // },\n    // 点击电影图片触发\n    goToMovieDetail(movieId) {\n      this.$router.push(`/movieDetail/${movieId}`);\n    },\n    // 点击评价影片触发\n    commentMovie(movieId) {\n      this.$router.push(`/movieComment/${movieId}`);\n    },\n    // 点击删除订单触发\n    async deleteOrder(orderId) {\n      const result = await this.$dialog\n        .confirm({\n          message: \"是否确定删除订单？\",\n          confirmButtonColor: \"#1989fa\",\n        })\n        .catch((err) => err);\n      if (result == \"cancel\") return;\n      const { data } = await this.$http.delete(`/deleteOrder/${orderId}`);\n      if (data.status == \"Ok\") {\n        this.$toast({\n          type: \"success\",\n          message: \"删除成功~\",\n        });\n        this.getOrderList();\n      }\n    },\n  },\n  created() {\n    this.getOrderList();\n  },\n};\n</script>\n\n\n\n<style lang=\"less\" scoped>\n// 最外层容器\n.mine-order {\n  background-color: #f6f6f6;\n  height: 100vh;\n  width: 100vw;\n}\n// 订单列表部分\n.orderList {\n  text-align: left;\n  // padding: 0.7692rem;\n  // background-color: red;\n  .orderItem:nth-child(1) {\n    border-top: none;\n  }\n  .orderItem {\n    background-color: #fff;\n    padding: 0.7692rem;\n    border-bottom: 0.0769rem solid rgb(211, 211, 211);\n    border-top: 0.0769rem solid rgb(211, 211, 211);\n    margin-bottom: 0.7692rem;\n    .orderItem-top {\n      color: rgb(171, 171, 171);\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      .cinema-name {\n        max-width: 80%;\n        font-size: 1.3846rem;\n        span:nth-child(1) {\n          margin-right: 0.3846rem;\n        }\n      }\n    }\n    .orderItem-center {\n      display: flex;\n      border-bottom: 0.0769rem solid rgb(228, 228, 228);\n      border-top: 0.0769rem solid rgb(228, 228, 228);\n      margin: 0.7692rem 0;\n      padding: 0.7692rem 0;\n      .movie-image {\n        width: 20%;\n        img {\n          width: 100%;\n        }\n      }\n      .movie-detail {\n        padding: 0 0.7692rem;\n        width: 55%;\n        .movie-name {\n          display: flex;\n          align-items: center;\n          font-size: 1.5385rem;\n          width: 100%;\n          height: 35%;\n          p {\n            max-width: 70%;\n            margin-right: 0.7692rem;\n          }\n        }\n        .order-detail {\n          height: 65%;\n          display: flex;\n          flex-direction: column;\n          justify-content: flex-end;\n          .ticket-code {\n            margin-bottom: 0.7692rem;\n            font-size: 1.1538rem;\n            color: rgb(160, 159, 159);\n          }\n          .order-date {\n            color: rgb(90, 90, 90);\n            height: 30%;\n            display: flex;\n            align-items: flex-end;\n            span {\n              margin-right: 0.3846rem;\n            }\n          }\n          .postion {\n            width: 100%;\n            color: rgb(152, 152, 152);\n            align-items: flex-end;\n            height: 20%;\n            span {\n              margin-right: 0.3846rem;\n            }\n          }\n        }\n      }\n      .comment-movie {\n        width: 25%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        span {\n          padding: 0.7692rem;\n          border-radius: 1.5385rem;\n          color: #fff;\n          background-color: #fe4e4a;\n        }\n      }\n    }\n    .orderItem-bottom {\n      padding: 0.3846rem 0;\n      font-size: 1.2308rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      .total-price {\n        color: rgb(154, 154, 154);\n      }\n      .delete-order {\n        color: rgb(179, 179, 179);\n        font-size: 1.0769rem;\n        span {\n          padding: 0.3846rem;\n          border: 1px solid #ccc;\n          border-radius: 1.5385rem;\n        }\n      }\n    }\n  }\n}\n// 占位背景\n.bgc-show {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background-color: rgb(240, 239, 239);\n  .bgc-show-center {\n    color: rgb(159, 159, 159);\n    .logo {\n      i {\n        font-size: 11.5385rem;\n      }\n    }\n    .content {\n      margin-top: 2.3077rem;\n      font-size: 1.5385rem;\n    }\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}