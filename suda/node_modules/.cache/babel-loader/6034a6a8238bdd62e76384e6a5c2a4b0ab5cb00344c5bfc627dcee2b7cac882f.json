{"ast":null,"code":"import MovieList from \"@/components/MovieList.vue\";\nimport BackTop from \"@/components/BackTop.vue\";\nexport default {\n  data() {\n    return {\n      currentIndex: 0,\n      // 顶部标题栏数据\n      tabTitle: [\"正在热映\", \"即将上映\", \"电影列表\"],\n      // 电影数据\n      movieList: [],\n      // 按钮显示文字\n      payTitle: \"\",\n      // 按钮背景颜色\n      payColor: \"\"\n    };\n  },\n  components: {\n    MovieList,\n    BackTop\n  },\n  methods: {\n    // 点击标题事件\n    titleClick(index) {\n      if (this.currentIndex === index) return;\n      this.currentIndex = index;\n      this.getMovieList();\n    },\n    // 获取电影列表\n    async getMovieList() {\n      // 获取首页正在热映数据\n      if (this.currentIndex == 0) {\n        const {\n          data: {\n            isShowingData\n          }\n        } = await this.$http.get(\"/public/isShowingMovieList\");\n        this.movieList = isShowingData;\n        this.payTitle = \"购票\";\n      }\n\n      // 获取首页即将上映数据\n      if (this.currentIndex == 1) {\n        const {\n          data: {\n            willShowingData\n          }\n        } = await this.$http.get(\"/public/willShowingMovieList\");\n        this.movieList = willShowingData;\n        this.payTitle = \"想看\";\n        this.payColor = \"#faaf00\";\n      }\n\n      // 获取首页电影列表数据\n      if (this.currentIndex == 2) {\n        const {\n          data: {\n            movieList\n          }\n        } = await this.$http.get(\"/public/movieList\");\n        this.movieList = movieList;\n        this.payTitle = \"想看\";\n        this.payColor = \"#faaf00\";\n      }\n      // console.log(\"电影数据\\n\", this.movieList);\n    }\n  },\n\n  created() {\n    const title = this.$route.query.movieTitle;\n    if (title) {\n      const index = this.tabTitle.indexOf(title);\n      if (title !== -1) {\n        this.titleClick(index);\n      }\n    }\n  },\n  mounted() {\n    this.getMovieList();\n  }\n};","map":{"version":3,"mappings":"AAoFA;AACA;AACA;EACAA;IACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;IACA;EACA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACA;MACA;MACA;QACA;UACAV;YAAAW;UAAA;QACA;QACA;QACA;MACA;;MAEA;MACA;QACA;UACAX;YAAAY;UAAA;QACA;QACA;QACA;QACA;MACA;;MAEA;MACA;QACA;UACAZ;YAAAG;UAAA;QACA;QACA;QACA;QACA;MACA;MACA;IACA;EACA;;EACAU;IACA;IACA;MACA;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;EACA;AACA","names":["data","currentIndex","tabTitle","movieList","payTitle","payColor","components","MovieList","BackTop","methods","titleClick","isShowingData","willShowingData","created","mounted"],"sourceRoot":"src/views","sources":["Movie.vue"],"sourcesContent":["<template>\n  <div class=\"movie\">\n    <!-- 顶部搜索栏 -->\n    <div class=\"header-search\">\n      <!-- 左边坐标区域 -->\n      <div class=\"left\">\n        <div><i class=\"iconfont icon-red-chongwugou\"></i></div>\n        <div>广州</div>\n        <div><van-icon name=\"arrow-down\" color=\"black\" size=\"1rem\" /></div>\n      </div>\n      <!-- 中间切换栏区域 -->\n      <div class=\"center\">\n        <div\n          v-for=\"(item, index) in tabTitle\"\n          :key=\"index\"\n          @click=\"titleClick(index)\"\n        >\n          <span\n            :class=\"['title', currentIndex === index ? 'activeTitle' : '']\"\n            >{{ item }}</span\n          >\n        </div>\n      </div>\n      <!-- 右边搜索区域 -->\n      <div class=\"right\">\n        <van-icon\n          name=\"search\"\n          size=\"2rem\"\n          @click=\"$router.push('/movieSearch')\"\n        />\n      </div>\n    </div>\n    <!-- 顶部搜索栏占位盒子 -->\n    <div class=\"position-box\"></div>\n    <!-- 电影列表 -->\n    <MovieList\n      v-if=\"movieList.length\"\n      class=\"movie-list\"\n      :movieData=\"movieList\"\n      :pay=\"payTitle\"\n      bgc=\"rgba(250, 250, 250, 1)\"\n      :payColor=\"payColor\"\n    >\n      <template #center=\"{ item }\">\n        <!-- 标题 -->\n        <div class=\"title\">\n          <h3 class=\"ellipsis\">{{ item.name }}</h3>\n        </div>\n        <!-- 内容 -->\n        <div class=\"content\">\n          <div v-if=\"item.comments\">\n            <p class=\"ellipsis\" v-if=\"item.movieScoreHalf\">\n              <van-rate\n                readonly\n                v-model=\"item.movieScoreHalf\"\n                allow-half\n                rateStar\n                color=\"#f7ba2a\"\n                void-color=\"#eff2f7\"\n                void-icon=\"star\"\n                size=\"1.3rem\"\n              />\n              {{ item.movieScoreHalf * 2 }}分\n            </p>\n            <p class=\"ellipsis\" v-else>暂无评分</p>\n          </div>\n          <p class=\"ellipsis\">类型：{{ item.type[0] }}</p>\n          <p class=\"ellipsis\">主演：{{ item.performer }}</p>\n        </div>\n      </template>\n    </MovieList>\n    <!-- 电影数据为空时的占位背景 -->\n    <div class=\"bgc-show\" v-else>\n      <div class=\"bgc-show-center\">\n        <div class=\"logo\"><i class=\"iconfont icon-nothing\"></i></div>\n        <div class=\"content\"><span>暂无电影数据</span></div>\n      </div>\n    </div>\n    <!-- 返回顶部按钮 -->\n    <BackTop> </BackTop>\n  </div>\n</template>\n\n<script>\nimport MovieList from \"@/components/MovieList.vue\";\nimport BackTop from \"@/components/BackTop.vue\";\nexport default {\n  data() {\n    return {\n      currentIndex: 0,\n      // 顶部标题栏数据\n      tabTitle: [\"正在热映\", \"即将上映\", \"电影列表\"],\n      // 电影数据\n      movieList: [],\n      // 按钮显示文字\n      payTitle: \"\",\n      // 按钮背景颜色\n      payColor: \"\",\n    };\n  },\n  components: {\n    MovieList,\n    BackTop,\n  },\n  methods: {\n    // 点击标题事件\n    titleClick(index) {\n      if (this.currentIndex === index) return;\n      this.currentIndex = index;\n      this.getMovieList();\n    },\n    // 获取电影列表\n    async getMovieList() {\n      // 获取首页正在热映数据\n      if (this.currentIndex == 0) {\n        const {\n          data: { isShowingData },\n        } = await this.$http.get(\"/public/isShowingMovieList\");\n        this.movieList = isShowingData;\n        this.payTitle = \"购票\";\n      }\n\n      // 获取首页即将上映数据\n      if (this.currentIndex == 1) {\n        const {\n          data: { willShowingData },\n        } = await this.$http.get(\"/public/willShowingMovieList\");\n        this.movieList = willShowingData;\n        this.payTitle = \"想看\";\n        this.payColor = \"#faaf00\";\n      }\n\n      // 获取首页电影列表数据\n      if (this.currentIndex == 2) {\n        const {\n          data: { movieList },\n        } = await this.$http.get(\"/public/movieList\");\n        this.movieList = movieList;\n        this.payTitle = \"想看\";\n        this.payColor = \"#faaf00\";\n      }\n      // console.log(\"电影数据\\n\", this.movieList);\n    },\n  },\n  created() {\n    const title = this.$route.query.movieTitle;\n    if (title) {\n      const index = this.tabTitle.indexOf(title);\n      if (title !== -1) {\n        this.titleClick(index);\n      }\n    }\n  },\n  mounted() {\n    this.getMovieList();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n// 外部样式\n.movie {\n  padding: 0 0.7692rem;\n  width: 100vw;\n  height: calc(100vh - 4.5rem);\n  background-image: -moz-linear-gradient(0, #ffffff, #00dcff4d);\n  background-image: -webkit-linear-gradient(0, #ffffff, #00dcff4d);\n  background-image: linear-gradient(0, #ffffff, #00dcff4d);\n}\n// 顶部导航栏样式\n.header-search {\n  z-index: 100;\n  left: 0;\n  right: 0;\n  top: 0;\n  position: fixed;\n  height: 3.8462rem;\n  display: flex;\n  background-color: #b8f5ff;\n  // 左边左边盒子\n  .left {\n    width: 25%;\n    font-size: 1.3846rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    i {\n      display: block;\n      color: rgb(250, 32, 159);\n      font-size: 1.9231rem;\n    }\n  }\n  // 中间盒子\n  .center {\n    flex: 1;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    .title {\n      padding: 0.6154rem 0;\n      font-size: 1.0769rem;\n    }\n  }\n  // 右边盒子\n  .right {\n    width: 20%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n// 顶部占位盒子\n.position-box {\n  height: 3.8462rem;\n  margin-bottom: 1.5385rem;\n}\n// 选中标题显示下划线并且变字体颜色\n.activeTitle {\n  color: rgba(245, 6, 38, 0.925);\n  border-bottom: 0.2308rem solid rgba(245, 6, 38, 0.925);\n}\n// 电影列表样式\n.movie-list {\n  margin-bottom: 20px;\n}\n// 占位背景\n.bgc-show {\n  margin-top: 50%;\n  transform: translateY(-20%);\n  .bgc-show-center {\n    color: rgb(159, 159, 159);\n    .logo {\n      i {\n        font-size: 11.5385rem;\n      }\n    }\n    .content {\n      margin-top: 2.3077rem;\n      font-size: 1.5385rem;\n    }\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}