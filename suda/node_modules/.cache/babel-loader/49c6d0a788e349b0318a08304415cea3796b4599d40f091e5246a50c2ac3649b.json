{"ast":null,"code":"import TopBar from \"@/components/TopBar\";\nimport MovieList from \"@/components/MovieList\";\nexport default {\n  name: \"MovieSearch\",\n  data() {\n    return {\n      value: \"\",\n      //搜索框内容\n      movieList: []\n    };\n  },\n  components: {\n    TopBar,\n    MovieList\n  },\n  methods: {\n    // 顶部返回按钮点击触发\n    backIconClick() {\n      this.$router.back();\n    },\n    // 确认搜索时触发，回车键\n    async goToSearch() {\n      if (this.value) {\n        const {\n          data: {\n            movieList\n          }\n        } = await this.$http.get(`/public/movieSearch/${this.value}`);\n        if (movieList.length != 0) {\n          this.$toast({\n            type: \"success\",\n            message: `为您搜索到${movieList.length}部电影`,\n            duration: 1000\n          });\n        } else {\n          this.$toast({\n            type: \"success\",\n            message: \"无相关电影~\",\n            duration: 1000\n          });\n        }\n        this.movieList = movieList;\n      } else {\n        this.$toast({\n          type: \"success\",\n          message: `请输入搜索内容`,\n          duration: 1000\n        });\n        this.movieList = [];\n      }\n      // console.log(this.movieList);\n    }\n  }\n};","map":{"version":3,"mappings":"AAmEA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;IACAC;MACA;IACA;IACA;IACA;MACA;QACA;UACAP;YAAAE;UAAA;QACA;QACA;UACA;YACAM;YACAC;YACAC;UACA;QACA;UACA;YACAF;YACAC;YACAC;UACA;QACA;QACA;MACA;QACA;UACAF;UACAC;UACAC;QACA;QACA;MACA;MACA;IACA;EACA;AACA","names":["name","data","value","movieList","components","TopBar","MovieList","methods","backIconClick","type","message","duration"],"sourceRoot":"src/views/MovieSearch","sources":["MovieSearch.vue"],"sourcesContent":["<template>\n  <div class=\"movie-search\">\n    <!-- 顶部topBar部分 -->\n    <TopBar\n      bgc=\"#FFF\"\n      centerContent=\"搜索电影\"\n      cor=\"black\"\n      @backIconClick=\"backIconClick\"\n    >\n    </TopBar>\n    <!-- 搜索框 -->\n    <div class=\"search\">\n      <van-search\n        v-model=\"value\"\n        placeholder=\"请输入电影关键词\"\n        shape=\"round\"\n        autofocus\n        @search=\"goToSearch\"\n        @clear=\"movieList = []\"\n      />\n    </div>\n    <!-- 电影列表 -->\n    <MovieList\n      v-if=\"movieList.length\"\n      class=\"movie-list\"\n      :movieData=\"movieList\"\n    >\n      <template #center=\"{ item }\">\n        <!-- 标题 -->\n        <div class=\"title\">\n          <h3 class=\"ellipsis\">{{ item.name }}</h3>\n        </div>\n        <!-- 内容 -->\n        <div class=\"content\">\n          <div v-if=\"item.comments\">\n            <p class=\"ellipsis\" v-if=\"item.movieScoreHalf\">\n              评分：\n              <van-rate\n                readonly\n                v-model=\"item.movieScoreHalf\"\n                allow-half\n                rateStar\n                color=\"#f7ba2a\"\n                void-color=\"#eff2f7\"\n                void-icon=\"star\"\n                size=\"1.3rem\"\n              />\n              {{ item.movieScoreHalf * 2 }}分\n            </p>\n            <p class=\"ellipsis\" v-else>暂无评分</p>\n          </div>\n          <p class=\"ellipsis\">类型：{{ item.type.join(\"、\") }}</p>\n          <p class=\"ellipsis\">主演：{{ item.performer }}</p>\n        </div>\n      </template>\n    </MovieList>\n    <!-- 电影数据为空时的占位背景 -->\n    <div class=\"bgc-show\" v-else>\n      <div class=\"bgc-show-center\">\n        <div class=\"logo\"><i class=\"iconfont icon-nothing\"></i></div>\n        <div class=\"content\"><span>暂无电影数据</span></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TopBar from \"@/components/TopBar\";\nimport MovieList from \"@/components/MovieList\";\nexport default {\n  name: \"MovieSearch\",\n  data() {\n    return {\n      value: \"\", //搜索框内容\n      movieList: [],\n    };\n  },\n  components: {\n    TopBar,\n    MovieList,\n  },\n  methods: {\n    // 顶部返回按钮点击触发\n    backIconClick() {\n      this.$router.back();\n    },\n    // 确认搜索时触发，回车键\n    async goToSearch() {\n      if (this.value) {\n        const {\n          data: { movieList },\n        } = await this.$http.get(`/public/movieSearch/${this.value}`);\n        if (movieList.length != 0) {\n          this.$toast({\n            type: \"success\",\n            message: `为您搜索到${movieList.length}部电影`,\n            duration: 1000,\n          });\n        } else {\n          this.$toast({\n            type: \"success\",\n            message: \"无相关电影~\",\n            duration: 1000,\n          });\n        }\n        this.movieList = movieList;\n      } else {\n        this.$toast({\n          type: \"success\",\n          message: `请输入搜索内容`,\n          duration: 1000,\n        });\n        this.movieList = [];\n      }\n      // console.log(this.movieList);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n// 外部盒子\n.movie-search {\n  height: 100vh;\n  width: 100vw;\n}\n// 占位背景\n.bgc-show {\n  margin-top: 50%;\n  transform: translateY(-20%);\n  .bgc-show-center {\n    color: rgb(159, 159, 159);\n    .logo {\n      i {\n        font-size: 11.5385rem;\n      }\n    }\n    .content {\n      margin-top: 2.3077rem;\n      font-size: 1.5385rem;\n    }\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}